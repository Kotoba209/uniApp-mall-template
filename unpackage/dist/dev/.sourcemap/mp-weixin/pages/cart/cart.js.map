{"version":3,"sources":["webpack:///C:/Users/kotoba/Desktop/mix-mall/main.js","webpack:///C:/Users/kotoba/Desktop/mix-mall/pages/cart/cart.vue?4082","webpack:///C:/Users/kotoba/Desktop/mix-mall/pages/cart/cart.vue?727b","webpack:///C:/Users/kotoba/Desktop/mix-mall/pages/cart/cart.vue?9eb6","webpack:///C:/Users/kotoba/Desktop/mix-mall/pages/cart/cart.vue?9e23","webpack:///C:/Users/kotoba/Desktop/mix-mall/pages/cart/cart.vue"],"names":["createPage","Page","components","uniNumberBox","data","total","allChecked","empty","cartList","onLoad","loadData","watch","e","length","computed","methods","uni","getStorageSync","calcTotal","onImageLoad","key","index","$set","onImageError","image","navToLogin","navigateTo","url","check","type","checked","list","forEach","item","numberChange","number","deleteCartItem","row","id","splice","hideLoading","clearCart","showModal","content","success","confirm","price","Number","toFixed","createOrder","goodsData","push","attr_val","JSON","stringify","$api","msg"],"mappings":"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","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=136d5926&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('136d5926')) {\n      api.createRecord('136d5926', component.options)\n    } else {\n      api.reload('136d5926', component.options)\n    }\n    module.hot.accept(\"./cart.vue?vue&type=template&id=136d5926&\", function () {\n      api.rerender('136d5926', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/kotoba/Desktop/mix-mall/pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=template&id=136d5926&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport {\n\t\tmapState\n\t} from 'vuex';\n\timport uniNumberBox from '@/components/uni-number-box.vue'\n\texport default {\n\t\tcomponents: {\n\t\t\tuniNumberBox\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttotal: 0, //总价格\n\t\t\t\tallChecked: false, //全选状态  true|false\n\t\t\t\tempty: false, //空白页现实  true|false\n\t\t\t\tcartList: [],\n\t\t\t};\n\t\t},\n\t\tonLoad(){\n\t\t\tthis.loadData();\n\t\t},\n\t\twatch:{\n\t\t\t//显示空白页\n\t\t\tcartList(e){\n\t\t\t\tlet empty = e.length === 0 ? true: false;\n\t\t\t\tif(this.empty !== empty){\n\t\t\t\t\tthis.empty = empty;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\t...mapState(['hasLogin'])\n\t\t},\n\t\tmethods: {\n\t\t\t//请求数据\n\t\t\tasync loadData(){\n\t\t\t\t// let list = await this.$api.json('cartList'); \n\t\t\t\t// let cartList = list.map(item=>{\n\t\t\t\t// \titem.checked = true;\n\t\t\t\t// \treturn item;\n        // });\n        let cartList = uni.getStorageSync('cart');\n\t\t\t\tthis.cartList = cartList;\n\t\t\t\tthis.calcTotal();  //计算总价\n\t\t\t},\n\t\t\t//监听image加载完成\n\t\t\tonImageLoad(key, index) {\n\t\t\t\tthis.$set(this[key][index], 'loaded', 'loaded');\n\t\t\t},\n\t\t\t//监听image加载失败\n\t\t\tonImageError(key, index) {\n\t\t\t\tthis[key][index].image = '/static/errorImage.jpg';\n\t\t\t},\n\t\t\tnavToLogin(){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/public/login'\n\t\t\t\t})\n\t\t\t},\n\t\t\t //选中状态处理\n\t\t\tcheck(type, index){\n\t\t\t\tif(type === 'item'){\n\t\t\t\t\tthis.cartList[index].checked = !this.cartList[index].checked;\n\t\t\t\t}else{\n\t\t\t\t\tconst checked = !this.allChecked\n\t\t\t\t\tconst list = this.cartList;\n\t\t\t\t\tlist.forEach(item=>{\n\t\t\t\t\t\titem.checked = checked;\n\t\t\t\t\t})\n\t\t\t\t\tthis.allChecked = checked;\n\t\t\t\t}\n\t\t\t\tthis.calcTotal(type);\n\t\t\t},\n\t\t\t//数量\n\t\t\tnumberChange(data){\n\t\t\t\tthis.cartList[data.index].number = data.number;\n\t\t\t\tthis.calcTotal();\n\t\t\t},\n\t\t\t//删除\n\t\t\tdeleteCartItem(index){\n\t\t\t\tlet list = this.cartList;\n\t\t\t\tlet row = list[index];\n\t\t\t\tlet id = row.id;\n\n\t\t\t\tthis.cartList.splice(index, 1);\n\t\t\t\tthis.calcTotal();\n\t\t\t\tuni.hideLoading();\n\t\t\t},\n\t\t\t//清空\n\t\t\tclearCart(){\n\t\t\t\tuni.showModal({\n\t\t\t\t\tcontent: '清空购物车？',\n\t\t\t\t\tsuccess: (e)=>{\n\t\t\t\t\t\tif(e.confirm){\n\t\t\t\t\t\t\tthis.cartList = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//计算总价\n\t\t\tcalcTotal(){\n\t\t\t\tlet list = this.cartList;\n\t\t\t\tif(list.length === 0){\n\t\t\t\t\tthis.empty = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet total = 0;\n\t\t\t\tlet checked = true;\n\t\t\t\tlist.forEach(item=>{\n\t\t\t\t\tif(item.checked === true){\n\t\t\t\t\t\ttotal += item.price * item.number;\n\t\t\t\t\t}else if(checked === true){\n\t\t\t\t\t\tchecked = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.allChecked = checked;\n\t\t\t\tthis.total = Number(total.toFixed(2));\n\t\t\t},\n\t\t\t//创建订单\n\t\t\tcreateOrder(){\n\t\t\t\tlet list = this.cartList;\n\t\t\t\tlet goodsData = [];\n\t\t\t\tlist.forEach(item=>{\n\t\t\t\t\tif(item.checked){\n\t\t\t\t\t\tgoodsData.push({\n\t\t\t\t\t\t\tattr_val: item.attr_val,\n\t\t\t\t\t\t\tnumber: item.number\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/order/createOrder?data=${JSON.stringify({\n\t\t\t\t\t\tgoodsData: goodsData\n\t\t\t\t\t})}`\n\t\t\t\t})\n\t\t\t\tthis.$api.msg('跳转下一页 sendData');\n\t\t\t}\n\t\t}\n\t}\n"],"sourceRoot":""}